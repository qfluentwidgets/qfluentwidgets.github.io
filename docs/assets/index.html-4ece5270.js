import{_ as n,a as s,b as a}from"./Edit_Light_Qss_Dialog-44576d9f.js";import{_ as e,o as t,c as p,e as o}from"./app-9cc97c28.js";const c={},i=o(`<h2 id="切换主题" tabindex="-1"><a class="header-anchor" href="#切换主题" aria-hidden="true">#</a> 切换主题</h2><p><code>setTheme()</code> 函数用于切换 qfluentwidgets 全部组件的亮暗主题。该函数接受下述值：</p><ul><li><code>Theme.LIGHT</code>：浅色主题</li><li><code>Theme.DARK</code>：深色主题</li><li><code>Theme.AUTO</code>：跟随系统主题。如果无法检测到系统的主题，将使用浅色主题。</li></ul><p>当主题发生改变时，<code>qconfig</code> 会发出 <code>themeChanged</code> 信号，组件库提供了 <code>toggleTheme()</code> 快速切换亮暗主题。</p><h2 id="样式表" tabindex="-1"><a class="header-anchor" href="#样式表" aria-hidden="true">#</a> 样式表</h2><p>如果想在主题发生改变时，自动切换界面的样式，可以继承 <code>StyleSheetBase</code> 类并重写 <code>path()</code> 方法。下述代码实现了一个能够自动切换背景颜色的 <code>Window</code> 类，它的 qss 文件路径为 <code>qss/light/window.qss</code> 和 <code>qss/dark/window.qss</code>：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> enum <span class="token keyword">import</span> Enum
<span class="token keyword">from</span> qfluentwidgets <span class="token keyword">import</span> StyleSheetBase<span class="token punctuation">,</span> Theme<span class="token punctuation">,</span> isDarkTheme<span class="token punctuation">,</span> qconfig


<span class="token keyword">class</span> <span class="token class-name">StyleSheet</span><span class="token punctuation">(</span>StyleSheetBase<span class="token punctuation">,</span> Enum<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot; Style sheet  &quot;&quot;&quot;</span>

    WINDOW <span class="token operator">=</span> <span class="token string">&quot;window&quot;</span>

    <span class="token keyword">def</span> <span class="token function">path</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> theme<span class="token operator">=</span>Theme<span class="token punctuation">.</span>AUTO<span class="token punctuation">)</span><span class="token punctuation">:</span>
        theme <span class="token operator">=</span> qconfig<span class="token punctuation">.</span>theme <span class="token keyword">if</span> theme <span class="token operator">==</span> Theme<span class="token punctuation">.</span>AUTO <span class="token keyword">else</span> theme
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f&quot;qss/</span><span class="token interpolation"><span class="token punctuation">{</span>theme<span class="token punctuation">.</span>value<span class="token punctuation">.</span>lower<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>value<span class="token punctuation">}</span></span><span class="token string">.qss&quot;</span></span>


<span class="token keyword">class</span> <span class="token class-name">Window</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> parent<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>parent<span class="token operator">=</span>parent<span class="token punctuation">)</span>

        self<span class="token punctuation">.</span>label <span class="token operator">=</span> QLabel<span class="token punctuation">(</span><span class="token string">&quot;Label&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>

        <span class="token comment"># 使用流畅样式表</span>
        StyleSheet<span class="token punctuation">.</span>WINDOW<span class="token punctuation">.</span><span class="token builtin">apply</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>样式表文件：</p><ul><li><p>浅色模式 <code>qss/light/window.qss</code></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">Window</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>249<span class="token punctuation">,</span> 249<span class="token punctuation">,</span> 249<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">Window&gt;QLabel</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> --ThemeColorPrimary<span class="token punctuation">;</span>   <span class="token comment">/* 使用组件库的主题色 */</span>
    <span class="token property">font</span><span class="token punctuation">:</span> 14px --FontFamilies<span class="token punctuation">;</span>    <span class="token comment">/* 使用组件库的字体 */</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li><li><p>深色模式 <code>qss/dark/window.qss</code></p><div class="language-css line-numbers-mode" data-ext="css"><pre class="language-css"><code><span class="token selector">Window</span> <span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">rgb</span><span class="token punctuation">(</span>32<span class="token punctuation">,</span> 32<span class="token punctuation">,</span> 32<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">Window&gt;QLabel</span> <span class="token punctuation">{</span>
    <span class="token property">color</span><span class="token punctuation">:</span> --ThemeColorPrimary<span class="token punctuation">;</span>
    <span class="token property">font</span><span class="token punctuation">:</span> 14px --FontFamilies<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul><p>样式表支持下述几种占位符：</p><ul><li><code>--ThemeColorPrimary</code></li><li><code>--ThemeColorLight1</code></li><li><code>--ThemeColorLight2</code></li><li><code>--ThemeColorLight3</code></li><li><code>--ThemeColorDark1</code></li><li><code>--ThemeColorDark2</code></li><li><code>--ThemeColorDark3</code></li><li><code>--FontFamilies</code></li></ul><h3 id="跟随系统主题" tabindex="-1"><a class="header-anchor" href="#跟随系统主题" aria-hidden="true">#</a> 跟随系统主题</h3><p>qfluentwidgets 提供了系统主题监听器线程 <code>SystemThemeListener</code>，可用于跟随系统主题。</p><p>下面是一个简单的使用示例：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">from</span> qfluentwidgets <span class="token keyword">import</span> FluentWindow<span class="token punctuation">,</span> SystemThemeListener<span class="token punctuation">,</span> isDarkTheme


<span class="token keyword">class</span> <span class="token class-name">MainWindow</span><span class="token punctuation">(</span>FluentWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 创建主题监听器</span>
        self<span class="token punctuation">.</span>themeListener <span class="token operator">=</span> SystemThemeListener<span class="token punctuation">(</span>self<span class="token punctuation">)</span>

        <span class="token comment"># 创建并添加子界面</span>
        <span class="token comment"># ...</span>

        <span class="token comment"># 启动监听器</span>
        self<span class="token punctuation">.</span>themeListener<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">closeEvent</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 停止监听器线程</span>
        self<span class="token punctuation">.</span>themeListener<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>themeListener<span class="token punctuation">.</span>deleteLater<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>closeEvent<span class="token punctuation">(</span>e<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">_onThemeChangedFinished</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>_onThemeChangedFinished<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># 云母特效启用时需要增加重试机制</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>isMicaEffectEnabled<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            QTimer<span class="token punctuation">.</span>singleShot<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token keyword">lambda</span><span class="token punctuation">:</span> self<span class="token punctuation">.</span>windowEffect<span class="token punctuation">.</span>setMicaEffect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>winId<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> isDarkTheme<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自定义样式" tabindex="-1"><a class="header-anchor" href="#自定义样式" aria-hidden="true">#</a> 自定义样式</h2><p>如果你对内置组件的样式感到不满，希望对其进行微调，可以使用 <code>setCustomStyleSheet()</code> 在原有样式的基础上添加新样式，该函数的签名如下：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">setCustomStyleSheet</span><span class="token punctuation">(</span>widget<span class="token punctuation">:</span> QWidget<span class="token punctuation">,</span> lightQss<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">,</span> darkQss<span class="token punctuation">:</span> <span class="token builtin">str</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>其中 <code>widget</code> 是需要调整样式的组件，<code>lightQss</code> 和 <code>darkQss</code> 是浅/深色主题下 <strong>添加</strong> 的自定义样式。</p><p>举个例子，将 <code>PushButton</code> 的圆角调成 10px：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>button <span class="token operator">=</span> PushButton<span class="token punctuation">(</span><span class="token string">&#39;Button&#39;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>

<span class="token comment"># 添加自定义样式表</span>
qss <span class="token operator">=</span> <span class="token string">&#39;PushButton{border-radius: 10px}&#39;</span>
setCustomStyleSheet<span class="token punctuation">(</span>button<span class="token punctuation">,</span> qss<span class="token punctuation">,</span> qss<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 QtDesigner 中，你可以通过新增动态属性来达到自定义样式的目的，操作步骤如下：</p><ol><li><p>添加字符串类型的动态属性</p><p><img src="`+n+'" alt="添加字符串动态属性"></p></li><li><p>在创建动态属性对话框中将属性名设置为 <code>lightCustomQss</code>，深色模式就设置为 <code>darkCustomQss</code></p><p><img src="'+s+'" alt="设置属性名"></p></li><li><p>点击属性旁边的 <code>...</code> 按钮，在编辑文本对话框中编辑 <code>lightCustomQss</code></p><p><img src="'+a+`" alt="设置属性名"></p></li></ol><h2 id="主题色" tabindex="-1"><a class="header-anchor" href="#主题色" aria-hidden="true">#</a> 主题色</h2><p><code>themeColor()</code> 返回主题色，<code>setThemeColor()</code> 用于修改全部组件的主题色。该函数接受三种类型的值：</p><ul><li><code>QColor</code></li><li><code>Qt.GlobalColor</code></li><li><code>str</code>：十六进制颜色字符串或者颜色名字，比如 <code>#0065d5</code> 或者 <code>red</code></li></ul><p>当主题色发生改变时，<code>qconfig</code> 管理的配置实例会发出 <code>themeColorChanged</code> 信号。</p><h3 id="系统主题色" tabindex="-1"><a class="header-anchor" href="#系统主题色" aria-hidden="true">#</a> 系统主题色</h3><p><code>qframelesswindow</code> v0.4.3 及以上版本提供了获取 Windows 和 macOS 系统主题色的接口，可搭配 <code>setThemeColor()</code> 使用：</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">from</span> qframelesswindow<span class="token punctuation">.</span>utils <span class="token keyword">import</span> getSystemAccentColor

<span class="token comment"># 只能获取 Windows 和 macOS 的主题色</span>
<span class="token keyword">if</span> sys<span class="token punctuation">.</span>platform <span class="token keyword">in</span> <span class="token punctuation">[</span><span class="token string">&quot;win32&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;darwin&quot;</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
   setThemeColor<span class="token punctuation">(</span>getSystemAccentColor<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> save<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="字体" tabindex="-1"><a class="header-anchor" href="#字体" aria-hidden="true">#</a> 字体</h2><p>qfluentwidgets v1.9.0 及以上版本支持调用 <code>setFontFamilies()</code> 来自定义组件库所使用的字体。</p><p><code>fontFamilies()</code> 返回当前字体，默认的字体家族为 <code>[&#39;Segoe UI&#39;, &#39;Microsoft YaHei&#39;, &#39;PingFang SC&#39;]</code>。</p>`,33),l=[i];function u(d,r){return t(),p("div",null,l)}const v=e(c,[["render",u],["__file","index.html.vue"]]);export{v as default};
